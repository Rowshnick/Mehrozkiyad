from typing import Dict, Any, List, Optional
import math

# ====================================================================
# ثابت‌ها (CONSTANTS) - شامل تمامی نگاشت‌های فارسی برای تفسیر
# ====================================================================

# فهرست سیارات و نقاط مورد استفاده در چارت (کلیدهای انگلیسی)
PLANETS = ['sun', 'moon', 'mercury', 'venus', 'mars', 'jupiter', 'saturn', 'uranus', 'neptune', 'pluto', 'true_node', 'part_of_fortune']

# نگاشت (Map) نام‌های انگلیسی به فارسی برای سیارات و نقاط
PLANETS_MAP = {
    'SUN': 'خورشید', 'MOON': 'ماه', 'MERCURY': 'عطارد', 'VENUS': 'زهره', 'MARS': 'مریخ',
    'JUPITER': 'مشتری', 'SATURN': 'زحل', 'URANUS': 'اورانوس', 'NEPTUNE': 'نپتون', 'PLUTO': 'پلوتون',
    'TRUE_NODE': 'گره شمالی', 'PART_OF_FORTUNE': 'سهم سعادت'
}

# نگاشت (Map) نام‌های انگلیسی به فارسی برای برج‌های فلکی
SIGNS_MAP = {
    'ARIES': 'حمل', 'TAURUS': 'ثور', 'GEMINI': 'جوزا', 'CANCER': 'سرطان', 'LEO': 'اسد', 
    'VIRGO': 'سنبله', 'LIBRA': 'میزان', 'SCORPIO': 'عقرب', 'SAGITTARIUS': 'قوس', 
    'CAPRICORN': 'جدی', 'AQUARIUS': 'دلو', 'PISCES': 'حوت'
}

# نگاشت (Map) نام‌های انگلیسی به فارسی برای زوایا (Aspects)
ASPECTS_MAP = {
    'CONJUNCTION': 'اتصال (0°)',
    'SEXTILE': 'تثلیث کوچک (60°)',
    'SQUARE': 'تربیع (90°)',
    'TRINE': 'تثلیث (120°)',
    'OPPOSITION': 'مقابله (180°)'
}

# نگاشت (Map) نام‌های انگلیسی به فارسی برای چهار عنصر و کیفیت
ELEMENT_MAP = {'Fire': 'آتش', 'Earth': 'خاک', 'Air': 'هوا', 'Water': 'آب'}
QUALITY_MAP = {'Cardinal': 'بنیادی', 'Fixed': 'ثابت', 'Mutable': 'متغیر'}

# ====================================================================
# توابع کمکی
# ====================================================================

def get_sign_name(degree: float) -> str:
    """محاسبه برج فلکی بر اساس درجه (0-360) و بازگرداندن نام فارسی آن."""
    sign_index = int(degree // 30)
    sign_names_en = list(SIGNS_MAP.keys())
    sign_name_en = sign_names_en[sign_index]
    return SIGNS_MAP[sign_name_en]

def get_degree_in_sign(degree: float) -> str:
    """محاسبه درجه دقیق سیاره در برج (مثلاً '25° 30'' ')."""
    deg_in_sign = degree % 30
    minutes = (deg_in_sign - int(deg_in_sign)) * 60
    return f"{int(deg_in_sign)}° {int(minutes)}'"

# ====================================================================
# بانک اطلاعاتی تفسیری (Interpretation Database) - این بخش نیاز به تکمیل محتوا دارد
# ====================================================================

# 1. تفسیر سیارات در برج‌ها (Planets in Signs)
PLANET_IN_SIGN_INTERPRETATIONS: Dict[str, Dict[str, str]] = {
    # نمونه‌هایی از تفسیرهای فارسی
    'sun': {
        'ARIES': '♈ *خورشید در حمل:* انرژی، شجاعت و ابتکار بالا. تمایل به رهبری و استقلال. ممکن است عجول یا تکانشی باشد.',
        'TAURUS': '♉ *خورشید در ثور:* ثبات، ارزش‌های مادی و نیاز به امنیت. آرام، صبور، اما گاهی لجباز.',
        'GEMINI': '♊ *خورشید در جوزا:* کنجکاوی ذهنی، تنوع‌طلبی و مهارت در چند کار همزمان. نیاز به ارتباط و یادگیری مداوم.',
        'CANCER': '♋ *خورشید در سرطان:* احساسات قوی، حمایتگر و وابستگی به خانواده و خانه. بسیار محافظه‌کار و حساس.',
        'LEO': '♌ *خورشید در اسد:* اعتماد به نفس، کاریزما و نیاز به توجه. سخاوتمند و وفادار، اما ممکن است دیکتاتورمآب باشد.',
        'VIRGO': '♍ *خورشید در سنبله:* عمل‌گرا، تحلیل‌گر و کمال‌گرا. توجه زیاد به جزئیات، سلامتی و خدمات‌رسانی.',
        'LIBRA': '♎ *خورشید در میزان:* نیاز به تعادل، صلح و روابط. بسیار دیپلماتیک و هنردوست، اما در تصمیم‌گیری مشکل دارد.',
        'SCORPIO': '♏ *خورشید در عقرب:* شدید، اسرارآمیز و متمرکز. قدرت بازسازی و شفای درونی، اما حسود و تملک‌گرا.',
        'SAGITTARIUS': '♐ *خورشید در قوس:* خوش‌بین، جستجوگر و عاشق آزادی. علاقه به فلسفه، سفر و حقیقت.',
        'CAPRICORN': '♑ *خورشید در جدی:* مسئولیت‌پذیر، جاه‌طلب و منضبط. نیاز به موفقیت اجتماعی و سخت‌کوشی.',
        'AQUARIUS': '♒ *خورشید در دلو:* مستقل، روشنفکر و بشردوست. خارج از عرف و علاقه‌مند به گروه‌ها و ایده‌های جدید.',
        'PISCES': '♓ *خورشید در حوت:* احساساتی، همدل، شهودی و هنری. گاهی اوقات غیرواقع‌بین و فرّار.',
    },
    'moon': {
        'ARIES': '♈ *ماه در حمل:* نیاز شدید به استقلال عاطفی. واکنش‌های سریع، مستقیم و بچگانه.',
        'TAURUS': '♉ *ماه در ثور:* نیاز عمیق به امنیت عاطفی و مالی. آرامش در ثبات و آسایش جسمی.',
        # ... (سایر تفسیرها)
    },
    'mercury': {
        'GEMINI': '♊ *عطارد در جوزا:* ذهن سریع، کنجکاو و تطبیق‌پذیر. مهارت‌های ارتباطی قوی و سطحی‌نگر.',
        # ... (سایر تفسیرها)
    }
}

# 2. تفسیر سیارات در خانه‌ها (Planets in Houses)
PLANET_IN_HOUSE_INTERPRETATIONS: Dict[int, Dict[str, str]] = {
    1: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه اول:* نشان می‌دهد که انرژی این سیاره چگونه در شخصیت، ظاهر و شیوه ابراز وجود شما نمود پیدا می‌کند.' for p in PLANETS},
    2: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه دوم:* تأثیر این سیاره بر منابع مالی، درآمد، دارایی‌ها و سیستم ارزش‌های شخصی شماست.' for p in PLANETS},
    3: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه سوم:* تأثیر بر نحوه ارتباط برقرار کردن، تفکر، یادگیری، و ارتباط با محیط نزدیک (خواهر، برادر، همسایگان).' for p in PLANETS},
    4: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه چهارم:* تأثیر این سیاره بر ریشه‌ها، خانه، خانواده، امنیت عاطفی و گذشته.' for p in PLANETS},
    5: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه پنجم:* تأثیر بر خلاقیت، عشق‌های رمانتیک، فرزندان، ریسک‌پذیری و سرگرمی.' for p in PLANETS},
    6: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه ششم:* تأثیر بر سلامت، روتین‌های روزانه، کارمندان (زیردستان) و خدمات‌رسانی.' for p in PLANETS},
    7: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه هفتم:* تأثیر بر ازدواج، روابط جدی یک به یک، قراردادها و دشمنان آشکار.' for p in PLANETS},
    8: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه هشتم:* تأثیر بر امور مالی مشترک (ارث، شراکت)، دگردیسی، جنسیت و مرگ.' for p in PLANETS},
    9: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه نهم:* تأثیر بر سفر طولانی، آموزش عالی، فلسفه، دین و باورهای گسترده.' for p in PLANETS},
    10: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه دهم:* تأثیر بر مسیر شغلی، شهرت، اعتبار اجتماعی و جایگاه عمومی شما.' for p in PLANETS},
    11: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه یازدهم:* تأثیر بر دوستان، گروه‌ها، امیدها، آرزوها و اهداف جمعی.' for p in PLANETS},
    12: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه دوازدهم:* تأثیر بر زندگی درونی، انزوا، امور پنهان، ناخودآگاه و کارما.' for p in PLANETS},
}

# 3. تفسیر زوایای اصلی (Major Aspects)
ASPECT_INTERPRETATIONS: Dict[str, Dict[str, str]] = {
    'Conjunction': {
        'SUN_MOON': 'اتصال خورشید و ماه: اتحاد ناخودآگاه و خودآگاه. شخصیتی قوی و متمرکز، اما گاهی اوقات انعطاف‌ناپذیر.',
        'MARS_VENUS': 'اتصال مریخ و زهره: تعادل بین میل (مریخ) و عشق (زهره). جاذبه قوی و انرژی خلاقانه.',
        'SUN_MERCURY': 'اتصال خورشید و عطارد: تمرکز ذهن بر اراده و هویت شخصی. ارتباط قوی بین خودآگاه و منطق.',
        # ... (سایر تفسیرهای اتصال)
    },
    'Square': {
        'SUN_SATURN': 'تربیع خورشید و زحل: چالش‌های هویتی و خودباوری. نیاز به سخت‌کوشی برای رسیدن به اهداف و درس‌های کارمیک.',
        'MARS_JUPITER': 'تربیع مریخ و مشتری: انرژی و خوش‌بینی بیش از حد. تمایل به زیاده‌روی و ریسک‌پذیری زیاد.',
        # ... (سایر تفسیرهای تربیع)
    },
    'Trine': {
        'JUPITER_VENUS': 'تثلیث مشتری و زهره: سعادت بزرگ. شانس، جذابیت اجتماعی و مالی، و نگرش خوش‌بینانه.',
        'MOON_NEPTUNE': 'تثلیث ماه و نپتون: شهود قوی، حساسیت هنری و روانی. همدلی و تخیل غنی.',
        # ... (سایر تفسیرهای تثلیث)
    },
    'Opposition': {
        'SUN_MOON': 'مقابله خورشید و ماه: درگیری درونی بین نیازهای عاطفی (ماه) و خواسته‌های هویتی (خورشید).',
        'SATURN_MARS': 'مقابله زحل و مریخ: کشمکش بین عمل (مریخ) و محدودیت (زحل). نیاز به تعادل بین شتاب و احتیاط.',
        # ... (سایر تفسیرهای مقابله)
    }
    # ... سایر زوایا
}

# ====================================================================
# تابع اصلی تولید تفسیر
# ====================================================================

def interpret_natal_chart(chart_data: Dict[str, Any]) -> str:
    """
    داده‌های چارت تولد را گرفته و یک تفسیر جامع فارسی تولید می‌کند.
    """
    
    interpretations = []

    # 1. تفسیر خورشید (هسته شخصیت)
    sun_data = chart_data['planets']['sun']
    sun_sign = sun_data['sign'].upper()
    sun_house = sun_data['house']
    
    interpretations.append("\n*--- خورشید و ماه (خودآگاه و ناخودآگاه) ---*")
    
    # تفسیر خورشید در برج
    sun_sign_interp = PLANET_IN_SIGN_INTERPRETATIONS.get('sun', {}).get(sun_sign, f"**☉ خورشید در {SIGNS_MAP.get(sun_sign, sun_sign)}:* تفسیر موجود نیست.")
    interpretations.append(sun_sign_interp)

    # تفسیر خورشید در خانه
    sun_house_interp = PLANET_IN_HOUSE_INTERPRETATIONS.get(sun_house, {}).get('sun', f"**☉ خورشید در خانه {sun_house}:* تمرکز انرژی حیاتی شما در این حوزه زندگی است.")
    interpretations.append(sun_house_interp)

    # 2. تفسیر ماه (عواطف و نیازهای ناخودآگاه)
    moon_data = chart_data['planets']['moon']
    moon_sign = moon_data['sign'].upper()
    moon_house = moon_data['house']
    
    # تفسیر ماه در برج
    moon_sign_interp = PLANET_IN_SIGN_INTERPRETATIONS.get('moon', {}).get(moon_sign, f"**☽ ماه در {SIGNS_MAP.get(moon_sign, moon_sign)}:* تفسیر موجود نیست.")
    interpretations.append(moon_sign_interp)

    # تفسیر ماه در خانه
    moon_house_interp = PLANET_IN_HOUSE_INTERPRETATIONS.get(moon_house, {}).get('moon', f"**☽ ماه در خانه {moon_house}:* نیازهای عاطفی و احساس امنیت شما از این حوزه تامین می‌شود.")
    interpretations.append(moon_house_interp)

    # 3. تفسیر Ascendant (طالع)
    interpretations.append("\n*--- طالع و خانه‌های اصلی ---*")
    
    asc_sign = chart_data['houses']['asc_sign'].upper()
    asc_interp = f"**طالع (Ascendant) در {SIGNS_MAP.get(asc_sign, asc_sign)}:* این برج فیلتر شخصیت شماست و نحوه برخورد اولیه شما با جهان را نشان می‌دهد."
    interpretations.append(asc_interp)
    
    # 4. تفسیر سیارات شخصی (عطارد، زهره، مریخ)
    
    for planet_name in ['mercury', 'venus', 'mars']:
        if planet_name in chart_data['planets']:
            data = chart_data['planets'][planet_name]
            p_sign = data['sign'].upper()
            p_house = data['house']
            p_fa = PLANETS_MAP.get(planet_name.upper(), planet_name.title())
            
            # تفسیر در برج
            sign_interp = PLANET_IN_SIGN_INTERPRETATIONS.get(planet_name, {}).get(p_sign, f"*{p_fa} در {SIGNS_MAP.get(p_sign, p_sign)}:* تفسیر موجود نیست.")
            interpretations.append(sign_interp)
            
            # تفسیر در خانه
            house_interp = PLANET_IN_HOUSE_INTERPRETATIONS.get(p_house, {}).get(planet_name, f"*{p_fa} در خانه {p_house}:* فعالیت این سیاره در این حوزه زندگی متمرکز است.")
            interpretations.append(house_interp)


    # 5. تفسیر زوایا (Aspects)
    aspects_list = chart_data.get('aspects', [])
    if aspects_list:
        aspects_interp = ["\n*--- زوایای اصلی (Aspects) ---*"]
        
        for aspect in aspects_list:
            p1 = aspect['p1'].upper().replace(" ", "_")
            p2 = aspect['p2'].upper().replace(" ", "_")
            aspect_name = aspect['aspect']
            
            key1 = f"{p1}_{p2}"
            key2 = f"{p2}_{p1}"
            
            # جستجو در بانک اطلاعاتی
            interp = ASPECT_INTERPRETATIONS.get(aspect_name, {}).get(key1)
            if not interp:
                interp = ASPECT_INTERPRETATIONS.get(aspect_name, {}).get(key2)
                
            if interp:
                aspects_interp.append(f"  • {interp} (اُرب: {aspect['orb']:.2f}°)")
            else:
                # توصیف عمومی از زاویه
                aspect_fa = ASPECTS_MAP.get(aspect_name.upper(), aspect_name)
                p1_fa = PLANETS_MAP.get(p1, p1.title())
                p2_fa = PLANETS_MAP.get(p2, p2.title())
                aspects_interp.append(f"  • {aspect_fa} بین {p1_fa} و {p2_fa} (اُرب: {aspect['orb']:.2f}°): این دو نیرو در حال تعامل هستند.")
                
        interpretations.extend(aspects_interp)
        
    # 6. خلاصه‌ای از توزیع عناصر و کیفیت‌ها
    element_summary = chart_data.get('summary', {}).get('elements', {})
    quality_summary = chart_data.get('summary', {}).get('qualities', {})
    
    summary_text = ["\n*--- توزیع عناصر و کیفیت‌ها ---*"]
    
    # Elements Summary
    elements_fa = [f"{ELEMENT_MAP.get(e, e)}: {c:.2f} سیاره" for e, c in element_summary.items()]
    summary_text.append(f"  • عناصر: {'، '.join(elements_fa)}")
    
    # Qualities Summary
    qualities_fa = [f"{QUALITY_MAP.get(q, q)}: {c:.2f} سیاره" for q, c in quality_summary.items()]
    summary_text.append(f"  • کیفیت‌ها: {'، '.join(qualities_fa)}")

    interpretations.extend(summary_text)

    # 7. ترکیب و قالب‌بندی نهایی
    final_output = "\n".join(interpretations)
    
    city_name = chart_data.get('city_name', 'نامشخص')
    date_str_fa = chart_data.get('birth_date_jalali', 'تاریخ نامشخص')
    time_str_fa = chart_data.get('birth_time_str', 'زمان نامشخص')
    
    header = f"⭐️ **تفسیر چارت تولد** ⭐️\n"
    header += f"**محل تولد:** {city_name} | **تاریخ:** {date_str_fa} | **زمان:** {time_str_fa}\n\n"
    
    return header + final_output



# ----------------------------------------------------------------------
# astrology_interpretation.py - دیکشنری‌های کامل و عمیق برای تفسیر چارت
# ----------------------------------------------------------------------

from typing import Dict, Any, List, Union

# دیکشنری‌های اصلی (Key: English name, Value: Persian interpretation text)

# 12 برج فلکی (Zodiac Signs)
SIGNS = [
    'aries', 'taurus', 'gemini', 'cancer', 'leo', 'virgo',
    'libra', 'scorpio', 'sagittarius', 'capricorn', 'aquarius', 'pisces'
]

# 12 خانه نجومی (Astrological Houses)
HOUSES = list(range(1, 13))

# 10 سیاره و نقطه (Planets and Points)
PLANETS = [
    'sun', 'moon', 'mercury', 'venus', 'mars', 'jupiter', 
    'saturn', 'uranus', 'neptune', 'pluto', 'true_node'
]


# ----------------------------------------------------------------------
# A. تفسیرهای آسندانت (Ascendant Interpretations - شخصیت ظاهری)
# ----------------------------------------------------------------------

ASCENDANT_INTERPRETATIONS: Dict[str, str] = {
    'aries': '*شخصیت ظاهری شما پرانرژی، جسور و مستقیم است. با اعتماد به نفس و استقلال عمل می‌کنید و دوست دارید پیشگام باشید.*',
    'taurus': '*شخصیت ظاهری آرام، استوار و محتاط است. شما به دنبال ثبات و امنیت هستید و اغلب کند و متفکرانه عمل می‌کنید.*',
    'gemini': '*شخصیت ظاهری شما با کنجکاوی، پرحرفی و هوش زیاد شناخته می‌شود. بسیار اجتماعی و متغیر هستید و نیاز به تنوع دارید.*',
    'cancer': '*شخصیت ظاهری شما حساس، دلسوز و محافظه‌کار است. شما با ملایمت با دنیا برخورد می‌کنید و امنیت عاطفی برایتان اولویت دارد.*',
    'leo': '*شخصیت ظاهری شما مغرور، نمایشی و باوقار است. اعتماد به نفس بالا و نیاز به دیده شدن و رهبری، ویژگی‌های بارز شماست.*',
    'virgo': '*شخصیت ظاهری شما متواضع، تحلیل‌گر و کمال‌گرا است. شما با دقت و توجه به جزئیات با جهان برخورد می‌کنید و دوست دارید مفید باشید.*',
    'libra': '*شخصیت ظاهری دلپذیر، صلح‌جو و اجتماعی است. شما به دنبال تعادل، هماهنگی و روابط خوب هستید و جذابیت زیادی دارید.*',
    'scorpio': '*شخصیت ظاهری شما مرموز، عمیق و شدید است. شما با قدرتی پنهان با جهان تعامل می‌کنید و به سختی به دیگران اجازه ورود می‌دهید.*',
    'sagittarius': '*شخصیت ظاهری شما خوش‌بین، جستجوگر و فلسفی است. شما به دنبال حقیقت، سفر و آزادی هستید و روحیه ماجراجو دارید.*',
    'capricorn': '*شخصیت ظاهری جدی، مسئولیت‌پذیر و بلندپرواز است. شما با نظم و خویشتن‌داری به دنیا نگاه می‌کنید و هدف‌مند هستید.*',
    'aquarius': '*شخصیت ظاهری غیرمعمول، روشنفکر و مستقل است. شما به دنبال تغییرات اجتماعی، دوستی‌های خاص و آزادی فکری هستید.*',
    'pisces': '*شخصیت ظاهری رؤیایی، شهودی و همدل است. شما حساسیت بالایی دارید و ممکن است در زندگی روزمره کمی سردرگم به نظر برسید.*',
}


# ----------------------------------------------------------------------
# B. تفسیرهای سیاره در برج (Planet in Sign Interpretations)
# (تمرکز بر حالت درونی و نحوه ابراز انرژی)
# ----------------------------------------------------------------------

SIGN_INTERPRETATIONS: Dict[str, Dict[str, str]] = {
    # --- خورشید (هویت، خودآگاهی، اراده) ---
    'sun': {
        'aries': '*هویت شما در استقلال، جسارت و عمل آغازگرانه تعریف می‌شود. شما با اعتماد به نفس زیاد و انگیزه‌ی بالا زندگی می‌کنید.*',
        'taurus': '*هویت شما بر اساس ثبات، امنیت مالی و ارزش‌های محسوس بنا شده است. آرام، متمرکز و به دنبال لذت‌های حسی هستید.*',
        'gemini': '*هویت شما در تنوع، برقراری ارتباط و یادگیری پیوسته است. ذهن کنجکاو و هویت انعطاف‌پذیر از ویژگی‌های شماست.*',
        'cancer': '*هویت شما به ریشه‌ها، خانواده و امنیت عاطفی گره خورده است. شما فردی دلسوز و محافظه‌کار هستید.*',
        'leo': '*هویت شما با غرور، رهبری و نیاز به توجه گره خورده است. بسیار خلاق و مرکزگرا هستید.*',
        'virgo': '*هویت شما در خدمت، کارایی و توجه به جزئیات است. شما فردی متواضع، تحلیل‌گر و کمال‌گرا هستید.*',
        'libra': '*هویت شما در تعادل، روابط یک به یک و جستجوی عدالت تعریف می‌شود. شما فردی اجتماعی و صلح‌جو هستید.*',
        'scorpio': '*هویت شما در عمق، تحول و قدرت درونی ریشه دارد. شما مرموز، شدید و قادر به بازسازی خود هستید.*',
        'sagittarius': '*هویت شما در جستجوی حقیقت، فلسفه و ماجراجویی است. شما خوش‌بین، باایمان و عاشق آزادی هستید.*',
        'capricorn': '*هویت شما در جاه‌طلبی، مسئولیت‌پذیری و موفقیت اجتماعی است. شما فردی منظم، جدی و هدف‌مند هستید.*',
        'aquarius': '*هویت شما در استقلال فکری، نوآوری و پیوندهای گروهی است. شما فردی انسان‌دوست، پیشرو و کمی غیرمتعارف هستید.*',
        'pisces': '*هویت شما در همدلی، شهود و جهان‌بینی رؤیایی است. شما حساس، هنری و گاهی از واقعیت دور هستید.*',
    },
    
    # --- ماه (نیازهای عاطفی، امنیت، عکس‌العمل غریزی) ---
    'moon': {
        'aries': '*امنیت عاطفی از طریق مستقل بودن و خودگردانی تأمین می‌شود. شما واکنش‌های سریع و آتشین دارید.*',
        'taurus': '*امنیت عاطفی در ثبات، راحتی و محیط آرام پیدا می‌شود. شما فردی وفادار و نیازمند یک پایگاه محکم هستید.*',
        'gemini': '*امنیت عاطفی در ارتباط، تنوع فکری و تبادل اطلاعات تأمین می‌شود. شما نیازمند صحبت کردن درباره احساسات خود هستید.*',
        'cancer': '*ماه در حاکمیت خود: امنیت عاطفی از طریق خانه، خانواده و پرورش دیگران تأمین می‌شود. بسیار حساس و مراقب هستید.*',
        'leo': '*امنیت عاطفی با دیده شدن، تأیید شدن و غرور به دست می‌آید. شما نیازمند بازی، درام و ابراز احساسات بزرگ هستید.*',
        'virgo': '*امنیت عاطفی از طریق مفید بودن، نظم و جزئیات تأمین می‌شود. شما به جای ابراز احساسات، عمل می‌کنید.*',
        'libra': '*امنیت عاطفی در هماهنگی، صلح و روابط متوازن تأمین می‌شود. شما از تنهایی گریزان هستید.*',
        'scorpio': '*امنیت عاطفی با عمق، راز و شدت احساسی پیدا می‌شود. شما احساسات پیچیده و شدید دارید و به کسی اعتماد نمی‌کنید مگر با آزمون‌های سخت.*',
        'sagittarius': '*امنیت عاطفی از طریق جستجو، فلسفه و آزادی تأمین می‌شود. روحیه ماجراجو دارید.*',
        'capricorn': '*امنیت عاطفی در ساختار، دستاورد و کنترل تأمین می‌شود. شما احساسات را سرکوب می‌کنید و فردی جدی در روابط هستید.*',
        'aquarius': '*امنیت عاطفی در گروه، دوستی و آزادی عاطفی تأمین می‌شود. شما احساسات خود را به صورت عقلانی تحلیل می‌کنید.*',
        'pisces': '*امنیت عاطفی از طریق شهود، خیال و دلسوزی تأمین می‌شود. شما بسیار همدل و روحیه‌ای لطیف و رؤیایی دارید.*',
    },

    # --- عطارد (نحوه تفکر و ارتباط) ---
    'mercury': {
        'aries': '*ذهنی سریع، مستقیم و بحث‌کننده. شما بدون فیلتر حرف می‌زنید و به شروع پروژه‌های فکری جدید علاقه‌مندید.*',
        'taurus': '*ذهنی آرام، متمرکز و عملی. شما برای تغییر ایده زمان نیاز دارید و تفکر شما به امور ملموس و مالی مربوط است.*',
        'gemini': '*عطارد در حاکمیت خود: ذهنی سریع، کنجکاو، منطقی و علاقه‌مند به صدها موضوع مختلف. ارتباط برقرار کننده عالی.*',
        'cancer': '*ذهنی که تحت تأثیر احساسات و حافظه است. شما از طریق داستان‌گویی و خاطرات ارتباط برقرار می‌کنید.*',
        'leo': '*ذهنی خلاق، نمایشی و خودباور. شما دوست دارید ایده‌هایتان را با شور و اشتیاق ابراز کنید و به دنبال تأیید و توجه دیگران به طرز فکر خود هستید.*',
        'virgo': '*عطارد در حاکمیت خود: ذهنی تحلیلی، جزئی‌نگر و عملگرا. شما عاشق طبقه‌بندی و حل مسئله هستید.*',
        'libra': '*ذهنی که به دنبال عدالت، توازن و منطق روابط است. شما قبل از تصمیم‌گیری تمام جوانب را می‌سنجید.*',
        'scorpio': '*ذهنی عمیق، کنجکاو و جستجوگر حقایق پنهان. شما به راحتی به اسرار پی می‌برید و ارتباط شما شدید است.*',
        'sagittarius': '*ذهنی که به دنبال تصویر بزرگ، فلسفه و ایده‌های بزرگ است. شما سخنگوی حقیقت هستید، اما ممکن است از جزئیات غافل شوید.*',
        'capricorn': '*ذهنی ساختارمند، عملی و جاه‌طلب. شما به برنامه‌ریزی و تصمیم‌گیری‌های طولانی‌مدت علاقه دارید.*',
        'aquarius': '*ذهنی مستقل، نوآور و غیرمتعارف. شما ایده‌های جدید و اجتماعی دارید و ارتباط شما عقلانی است.*',
        'pisces': '*ذهنی شهودی، هنری و غیرمنطقی. شما از طریق تصویر و احساسات ارتباط برقرار می‌کنید و گاهی تمرکز ندارید.*',
    },

    # --- زهره (عشق، ارزش‌ها، جذابیت) ---
    'venus': {
        'aries': '*شما در عشق، مستقیم، هیجان‌انگیز و کمی خودخواه هستید. سریع عاشق می‌شوید و عاشق تعقیب هستید. به دنبال شریک مستقل.*',
        'taurus': '*زهره در حاکمیت خود: شما در عشق، وفادار، حسی و ثابت‌قدم هستید. به دنبال راحتی، زیبایی و امنیت مالی در روابط هستید.*',
        'gemini': '*شما در عشق، متنوع، بازیگوش و نیازمند تحریک فکری هستید. ممکن است در روابط به سرعت خسته شوید.*',
        'cancer': '*شما در عشق، عمیقاً عاطفی، محافظه‌کار و نیازمند امنیت هستید. ارزش‌های شما با خانواده، خانه و خاطرات گره خورده است.*',
        'leo': '*شما در عشق، نمایشی، وفادار و نیازمند تحسین و توجه هستید. روابط شما باید مرکز توجه باشند.*',
        'virgo': '*شما در عشق، محتاط، خدمتگزار و به دنبال کمال هستید. عشق خود را با کمک عملی و توجه به جزئیات نشان می‌دهید.*',
        'libra': '*زهره در حاکمیت خود: شما در عشق، متوازن، جذاب و به دنبال یک شریک کامل هستید. روابط برای شما هدف زندگی است.*',
        'scorpio': '*شما در عشق، شدید، انحصاری و نیازمند پیوند روانی عمیق هستید. به شدت حسود هستید و از سطحی بودن نفرت دارید.*',
        'sagittarius': '*شما در عشق، آزاد، صادق و به دنبال شریک با دیدگاه‌های بزرگ هستید. به آزادی خود در روابط اهمیت می‌دهید.*',
        'capricorn': '*شما در عشق، جدی، محتاط و به دنبال روابط باثبات و طولانی‌مدت هستید. عشق را با دستاوردها و جایگاه اجتماعی می‌سنجید.*',
        'aquarius': '*شما در عشق، غیرمتعارف، دوستانه و به دنبال استقلال در روابط هستید. عشق را به صورت یک پیوند فکری و گروهی می‌بینید.*',
        'pisces': '*شما در عشق، رؤیایی، ایثارگر و بی‌قید و شرط هستید. تمایل به قربانی شدن در روابط دارید و عاشقانه غیرواقع‌بین هستید.*',
    },

    # --- مریخ (انرژی، عمل، پرخاشگری) ---
    'mars': {
        'aries': '*مریخ در حاکمیت خود: انرژی شما مستقیم، هیجان‌انگیز و سریع است. شما بدون فکر اقدام می‌کنید و بسیار رقابتی هستید.*',
        'taurus': '*انرژی شما ثابت، کند و متمرکز است. شروع عمل سخت است، اما وقتی شروع کنید، شکست‌ناپذیر هستید. برای امور مالی مبارزه می‌کنید.*',
        'gemini': '*انرژی شما پراکنده، کلامی و فکری است. شما با کلمات مبارزه می‌کنید و انرژی زیادی را صرف صحبت کردن و حرکت می‌کنید.*',
        'cancer': '*انرژی شما دفاعی، عاطفی و متوجه خانه و خانواده است. شما به طور غریزی از چیزهایی که دوست دارید محافظت می‌کنید.*',
        'leo': '*انرژی شما نمایشی، گرم و نیازمند تحسین است. شما برای رهبری و دیده شدن عمل می‌کنید.*',
        'virgo': '*انرژی شما متوجه خدمات، کار و کمال است. شما انرژی خود را به صورت دقیق و تحلیلی برای بهبود کارایی صرف می‌کنید.*',
        'libra': '*انرژی و اقدام شما حول عدالت، تعادل و روابط دیپلماتیک می‌چرخد. از درگیری آشکار دوری می‌کنید.*',
        'scorpio': '*مریخ در حاکمیت خود: انرژی شما شدید، متمرکز و پنهان است. شما با اراده‌ای قوی و غیرقابل انعطاف عمل می‌کنید.*',
        'sagittarius': '*انرژی شما متوجه جستجوی حقیقت، سفر و آزادی است. شما برای ایدئولوژی‌های خود مبارزه می‌کنید.*',
        'capricorn': '*مریخ در اوج (Exaltation): انرژی شما ساختارمند، کنترل‌شده و جاه‌طلب است. شما با نظم و هدف عمل می‌کنید.*',
        'aquarius': '*انرژی شما نوآورانه، گروهی و غیرشخصی است. شما برای آرمان‌ها و تغییرات اجتماعی عمل می‌کنید.*',
        'pisces': '*انرژی شما منفعل، شهودی و غیرمستقیم است. شما از طریق همدلی و هنر عمل می‌کنید، اما ممکن است فاقد انگیزه باشید.*',
    },

    # --- مشتری، زحل، گره شمالی و سیارات بیرونی (اهمیت جهانی کمتر) ---
    'jupiter': {
        'aries': '*رشد و خوشبختی از طریق شروع‌های جدید، جسارت و اتکا به خود می‌آید.*',
        'libra': '*رشد و خوشبختی در روابط، عدالت و زیبایی‌های هنری است.*',
        'capricorn': '*رشد از طریق ساختارها، جاه‌طلبی و کار سخت به دست می‌آید (در اینجا دچار سقوط است، رشد آهسته است).*',
    },
    'saturn': {
        'virgo': '*درس‌ها و محدودیت‌ها در کار، سلامت و جزئیات روزمره است.*',
        'libra': '*درس‌ها و محدودیت‌ها در روابط و تعهدات است (در اینجا در اوج است، درس‌ها با تعادل است).*',
        'capricorn': '*زحل در حاکمیت خود: درس‌ها و محدودیت‌ها در جاه‌طلبی، مسئولیت و ساختار است.*',
    },
    'true_node': {
        'leo': '*مسیری که روح باید دنبال کند، رهبری، خلاقیت و مرکز توجه بودن است.*',
        'aquarius': '*مسیری که روح باید دنبال کند، استقلال فکری، کار گروهی و نوآوری اجتماعی است.*',
        'scorpio': '*مسیری که روح باید دنبال کند، تحول عمیق، مدیریت بحران و اعتماد به قدرت درونی است.*',
    },
    # برای Uranus, Neptune, Pluto به دلیل تأثیر نسلی، تفسیر در خانه اهمیت بیشتری دارد.
    'uranus': {}, 
    'neptune': {},
    'pluto': {},
}


# ----------------------------------------------------------------------
# C. تفسیرهای سیاره در خانه (Planet in House Interpretations)
# (نشان‌دهنده حوزه اصلی فعالیت انرژی سیاره)
# ----------------------------------------------------------------------

HOUSE_INTERPRETATIONS: Dict[str, Dict[int, str]] = {
    # --- خانه اول (شخصیت ظاهری، بدن، آغازها) ---
    1: {
        'sun': '*انرژی حیاتی شما متمرکز بر هویت شخصی، خودابرازگری و ظاهر شماست. شما باید رهبر خود باشید.*',
        'moon': '*نیازهای عاطفی شما علنی است و در ظاهر و واکنش‌های غریزی شما دیده می‌شود. شما به شدت تحت تأثیر محیط قرار دارید.*',
        'mercury': '*تفکر و ارتباط شما مستقیم و فوری است و بر نحوه ابراز وجود شما تأثیر می‌گذارد.*',
        'venus': '*جذابیت و ارزش‌های شما در ظاهر و شخصیت شما نمود پیدا می‌کند. شما فردی دلپذیر و دوست‌داشتنی هستید.*',
        'mars': '*انرژی و عمل شما متوجه خود و شروع پروژه‌های شخصی است. شما بسیار پرانرژی و رقابتی هستید.*',
        'jupiter': '*رشد و خوش‌بینی شما از طریق خودابرازگری و ریسک‌پذیری در زندگی شخصی به دست می‌آید.*',
        'saturn': '*درس‌ها و مسئولیت‌های شما در ساختاردهی به هویت و نظم شخصی است. ممکن است در ابراز وجود محتاط باشید.*',
        'uranus': '*شخصیت و هویت شما غیرمتعارف و مستقل است. شما به دنبال آزادی و نوآوری در زندگی شخصی هستید.*',
        'neptune': '*شخصیت شما رؤیایی، حساس و غیرقابل تعریف است. ممکن است در مورد هویت خود سردرگم باشید.*',
        'pluto': '*شخصیت شما شدید، قدرتمند و تحول‌آفرین است. شما اراده‌ای قوی و توانایی برای بازسازی مداوم دارید.*',
    },

    # --- خانه هفتم (روابط، ازدواج، شراکت) ---
    7: {
        'sun': '*انرژی حیاتی شما متمرکز بر روابط یک به یک، شراکت و یافتن هویت از طریق دیگری است.*',
        'moon': '*نیازهای عاطفی و امنیت شما به شدت به شریک زندگی و تعادل در روابط وابسته است.*',
        'mercury': '*تفکر و ارتباط شما بر قراردادها، مذاکرات و دیدگاه شریک شما متمرکز است.*',
        'venus': '*شما جذابیت و ارزش‌های خود را از طریق روابط صمیمی و ازدواج ابراز می‌کنید. شریک زندگی شما بسیار مهم است.*',
        'mars': '*انرژی و عمل شما متوجه درگیری‌ها یا فعالیت‌های مشترک با شریک و رقابت‌ها است.*',
        'jupiter': '*رشد و خوشبختی از طریق ازدواج، شراکت و مشاوره به دیگران به دست می‌آید.*',
        'saturn': '*درس‌ها و مسئولیت‌ها در تعهدات جدی و ازدواج است. شما روابط را دیر یا با ساختار محکم شروع می‌کنید.*',
        'uranus': '*شما به دنبال روابط آزاد، غیرمتعارف و هیجان‌انگیز هستید. ازدواج‌های ناگهانی یا غیرمنتظره ممکن است.*',
        'neptune': '*روابط شما رؤیایی و آرمانی است، اما ممکن است با توهم و عدم وضوح در شریک مواجه شوید.*',
        'pluto': '*روابط شما شدید، قدرتمند و تحول‌آفرین است. ممکن است با چالش‌های کنترل و قدرت در شراکت مواجه شوید.*',
    },

    # --- خانه دهم (شغل، شهرت عمومی، جایگاه اجتماعی) ---
    10: {
        'sun': '*هویت شما در شغل، جاه‌طلبی و موفقیت عمومی تعریف می‌شود. شما باید در حوزه حرفه‌ای خود بدرخشید.*',
        'moon': '*نیازهای عاطفی شما علنی است و در حوزه شغل، جاه‌طلبی و شهرت عمومی امنیت پیدا می‌کنید.*',
        'mercury': '*تفکر و ارتباط شما متمرکز بر اهداف شغلی، جایگاه اجتماعی و شهرت حرفه‌ای است.*',
        'venus': '*شما جذابیت خود را در حوزه حرفه‌ای و عمومی ابراز می‌کنید و ممکن است با رئیس یا مقامات روابط خوبی داشته باشید.*',
        'mars': '*انرژی و عمل شما متوجه اهداف شغلی و جاه‌طلبی است. شما با انرژی زیاد برای رسیدن به قله تلاش می‌کنید.*',
        'jupiter': '*رشد و خوشبختی از طریق شغل، جایگاه اجتماعی و پیروی از اهداف بزرگ عمومی به دست می‌آید.*',
        'saturn': '*درس‌ها و مسئولیت‌ها در ساختاردهی به شغل، جایگاه اجتماعی و بلندپروازی است. موفقیت شما آهسته و با ثبات است.*',
        'uranus': '*شغل و حرفه شما غیرمتعارف، نوآورانه و متمرکز بر تغییرات اجتماعی است.*',
        'neptune': '*شغل شما ممکن است به هنر، کمک به دیگران یا حوزه‌هایی که وضوح ندارند (مانند نفت، دریا) مربوط باشد.*',
        'pluto': '*شغل شما شدید، قدرتمند و تحول‌آفرین است. شما به دنبال قدرت و کنترل در حوزه حرفه‌ای خود هستید.*',
    },

    # --- خانه ششم (سلامت، کار روزمره، خدمات) ---
    6: {
        'sun': '*انرژی حیاتی شما متمرکز بر کار روزمره، سلامت و خدمت به دیگران است. نیاز به مفید بودن دارید.*',
        'moon': '*نیازهای عاطفی شما به نظم، محیط کار و عادات روزانه وابسته است. شما با مراقبت از دیگران احساس امنیت می‌کنید.*',
        'mercury': '*نحوه‌ی تفکر و برقراری ارتباط شما متمرکز بر مسائل روزمره، کار، سلامت و خدمات است. شما ذهنی تحلیلی و جزئی‌نگر برای برنامه‌ریزی و بهبود کارایی دارید.*',
        'venus': '*شما در محیط کار دلپذیر و با همکاران روابط خوبی دارید. زیبایی و هماهنگی در محیط روزمره برایتان مهم است.*',
        'mars': '*انرژی شما صرف کار، وظایف روزمره و فعالیت‌های فیزیکی است. شما سخت‌کوش هستید، اما ممکن است در محیط کار با درگیری مواجه شوید.*',
        'jupiter': '*رشد و خوشبختی از طریق خدمات، بهبود سلامت و فرصت‌های عالی در محیط کار روزمره به دست می‌آید.*',
        'saturn': '*درس‌ها و مسئولیت‌ها در نظم، کار سخت و مراقبت از سلامت است. شما باید در کارهای روزمره منظم و باثبات باشید.*',
        'uranus': '*شما عادات روزمره، روال کاری و مسائل سلامتی غیرمعمول دارید. به دنبال نوآوری در محیط کار هستید.*',
        'neptune': '*محیط کار و سلامت شما ممکن است گیج‌کننده باشد. شما توانایی شفا و مراقبت شهودی از دیگران را دارید.*',
        'pluto': '*شما در محیط کار روزمره و سلامت با تحولات عمیق مواجه هستید. شما وسواس زیادی در مورد رژیم و عادت دارید.*',
    },

    # --- خانه پنجم (عشق، خلاقیت، کودکان، بازی) ---
    5: {
        'sun': '*انرژی حیاتی شما در خلاقیت، خودابرازگری، تفریح و روابط عاشقانه نمود پیدا می‌کند. شما باید بدرخشید و لذت ببرید.*',
        'moon': '*نیازهای عاطفی شما با خلاقیت، بازی، روابط عاشقانه و کودکان تأمین می‌شود.*',
        'mercury': '*تفکر و ارتباط شما متمرکز بر خلاقیت، بازی و سرگرمی است. شما می‌توانید در کلامی کردن بازی و هنر ماهر باشید.*',
        'venus': '*لذت و عشق شما با خلاقیت، تفریحات، امور عاشقانه و کودکان مرتبط است. شما به دنبال ابراز محبت به روش‌های بازیگوشانه و نمایشی هستید.*',
        'mars': '*انرژی شما صرف فعالیت‌های خلاقانه، ورزشی و بازی‌های عاشقانه است. ممکن است در عشق عجول باشید.*',
        'jupiter': '*رشد و خوشبختی از طریق خلاقیت، شانس در سرمایه‌گذاری‌ها، کودکان و روابط عاشقانه به دست می‌آید.*',
        'saturn': '*درس‌ها و مسئولیت‌ها در خلاقیت، پذیرش تفریح یا کودکان است. ممکن است در ابراز خلاقیت خود محتاط باشید.*',
        'uranus': '*خلاقیت شما غیرمتعارف است. شما به دنبال روابط عاشقانه ناگهانی و هیجان‌انگیز هستید.*',
        'neptune': '*خلاقیت شما رؤیایی و هنری است. در روابط عاشقانه ممکن است با ابهام یا ایثار مواجه شوید.*',
        'pluto': '*خلاقیت شما شدید و تحول‌آفرین است. شما با اراده‌ای قوی به دنبال ابراز وجود یا کنترل در روابط عاشقانه هستید.*',
    },
    
    # --- سایر خانه‌ها (تفسیر خلاصه) ---
    2: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه دوم (مالکیت و ارزش‌های شخصی): تأثیر بر منابع مالی، درآمد و سیستم ارزش‌های شما.*' for p in PLANETS},
    3: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه سوم (ارتباطات، ذهن و محیط نزدیک): تأثیر بر نحوه فکر کردن، ارتباط روزمره و خواهر/برادران.*' for p in PLANETS},
    4: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه چهارم (خانه، خانواده و ریشه‌ها): تأثیر بر امنیت درونی، محیط خانوادگی و پایان زندگی.*' for p in PLANETS},
    8: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه هشتم (تغییر، منابع مشترک، امور پنهان): تأثیر بر امور مالی مشترک، تحولات عمیق و مرگ/تولد دوباره.*' for p in PLANETS},
    9: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه نهم (فلسفه، سفر و آموزش عالی): تأثیر بر دیدگاه‌های بزرگ، معنویت و سفرهای دور.*' for p in PLANETS},
    11: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه یازدهم (دوستان، گروه‌ها و آرزوها): تأثیر بر اهداف جمعی، شبکه‌های اجتماعی و آرزوهای آینده.*' for p in PLANETS},
    12: {p: f'*{PLANETS_MAP.get(p.upper(), p.title())} در خانه دوازدهم (خلوت، ناخودآگاه و انزوا): تأثیر بر اسرار، محدودیت‌های شخصی و فعالیت‌های پشت صحنه.*' for p in PLANETS},

    # افزودن تفسیرهای کامل برای True Node در خانه ها
    'true_node': {
        1: '*مسیر تکاملی شما متمرکز بر ایجاد یک هویت مستقل و قاطع است. باید خود را بدون وابستگی ابراز کنید.*',
        7: '*مسیر تکاملی شما در روابط یک به یک و شراکت‌ها تعریف می‌شود. شما باید بیاموزید که چگونه در روابط، برابر و هماهنگ باشید.*',
        10: '*مسیر تکاملی شما به سمت موفقیت عمومی، جاه‌طلبی‌های حرفه‌ای و دستاوردهای اجتماعی است. باید در حوزه عمومی بدرخشید.*',
        6: '*مسیر تکاملی شما بر خدمت، بهبود کارایی، نظم و سلامت روزمره متمرکز است. باید از طریق مفید بودن رشد کنید.*',
        5: '*مسیر تکاملی شما از طریق خلاقیت، بازی، روابط عاشقانه و ابراز وجود فردی است. باید شادی و اصالت خود را پیدا کنید.*',
        2: '*مسیر تکاملی شما بر ایجاد ارزش‌های شخصی، ثبات مالی و اتکا به منابع خود است.*',
        3: '*مسیر تکاملی شما بر یادگیری، ارتباطات روزمره، آموزش‌های کوتاه و محیط نزدیک متمرکز است.*',
        4: '*مسیر تکاملی شما بر ایجاد امنیت عاطفی در خانه، خانواده و ریشه‌های درونی متمرکز است.*',
        8: '*مسیر تکاملی شما بر تحول عمیق، مدیریت منابع مشترک و روبرو شدن با ترس‌ها و امور پنهان است.*',
        9: '*مسیر تکاملی شما بر فلسفه، جستجوی حقیقت، آموزش عالی و سفرهای دور است. شما باید دیدگاه خود را گسترش دهید.*',
        11: '*مسیر تکاملی شما بر اهداف گروهی، دوستی‌ها، نوآوری اجتماعی و آرمان‌های بزرگ متمرکز است.*',
        12: '*مسیر تکاملی شما بر معنویت، خلوت، کمک به افراد ضعیف و رها کردن نفس (Ego) است.*',
    }
}


# ----------------------------------------------------------------------
# D. تفسیرهای حاکمیت خانه (Ruler in House Interpretations)
# (مثال: حاکم آسندانت در خانه هفتم)
# ----------------------------------------------------------------------

# این دیکشنری حاوی تفسیرهایی برای قرارگیری حاکم یک خانه (مثلاً حاکم خانه ۷) در خانه‌ای دیگر (مثلاً خانه ۱۰) است.
# این مورد برای "حاکم چارت" (حاکم آسندانت) اهمیت حیاتی دارد.

RULER_IN_HOUSE_INTERPRETATIONS: Dict[int, Dict[int, str]] = {
    # Ruler of House 1 (Ascendant/Chart Ruler) in House X
    1: { 
        1: '*حاکم چارت در خانه خود: هویت و هدف اصلی شما در هویت شخصی، ظاهر و خودابرازگری ریشه دارد. شما فردی متکی به نفس هستید.*',
        2: '*حاکم چارت در خانه دوم: انرژی و هویت اصلی شما متمرکز بر منابع مالی، درآمد و سیستم ارزش‌های شخصی شماست. امنیت مالی برای شما تعیین‌کننده است.*',
        3: '*حاکم چارت در خانه سوم: هویت شما از طریق ارتباطات، یادگیری و محیط نزدیک (خواهر/برادر، همسایه‌ها) شکل می‌گیرد. شما یک متفکر محلی هستید.*',
        4: '*حاکم چارت در خانه چهارم: هویت شما عمیقاً با خانه، خانواده، ریشه‌ها و امنیت عاطفی گره خورده است. شما فردی خصوصی و ریشه‌دار هستید.*',
        5: '*حاکم چارت در خانه پنجم: هویت و هدف شما در ابراز خلاقیت، روابط عاشقانه، کودکان و تفریح است. شما به دنبال لذت بردن و درخشیدن هستید.*',
        6: '*حاکم چارت در خانه ششم: هویت شما در خدمت به دیگران، کار روزمره، سلامت و مفید بودن برای جامعه تعریف می‌شود. شما یک فرد عملگرا و متواضع هستید.*',
        7: '*حاکم چارت در خانه هفتم: تمرکز انرژی و هویت شما در حوزه‌ی خانه هفتم (روابط و ازدواج) قرار دارد، که بر تمامی شخصیت شما حاکم است. شما هویت خود را از طریق دیگران پیدا می‌کنید.*',
        8: '*حاکم چارت در خانه هشتم: هویت شما متوجه منابع مشترک، تحولات عمیق، امور پنهان و بحران‌ها است. شما فردی شدید و جستجوگر هستید.*',
        9: '*حاکم چارت در خانه نهم: هویت شما در جستجوی حقیقت، فلسفه، آموزش عالی و سفرهای دوردست تعریف می‌شود. شما یک معلم یا مسافر هستید.*',
        10: '*حاکم چارت در خانه دهم: هویت و هدف اصلی شما در جاه‌طلبی، شغل، جایگاه اجتماعی و موفقیت عمومی است. شما فردی هدفمند و متمرکز بر دستاوردها هستید.*',
        11: '*حاکم چارت در خانه یازدهم: هویت شما در گروه، دوستی‌ها، آرزوهای جمعی و نوآوری اجتماعی تعریف می‌شود. شما یک فعال اجتماعی یا فردی گروه محور هستید.*',
        12: '*حاکم چارت در خانه دوازدهم: هویت شما در خلوت، امور پنهان، معنویت و ناخودآگاه ریشه دارد. شما فردی ایثارگر و دارای حس شهود قوی هستید.*',
    },
    
    # Ruler of House 10 (Career/Public Status Ruler) in House X
    10: {
        1: '*حاکم خانه شغل (۱۰) در خانه اول (شخصیت): مسیر شغلی و شهرت عمومی شما به شدت به ظاهر، خودابرازگری و ابتکار عمل شخصی شما وابسته است.*',
        2: '*حاکم خانه شغل (۱۰) در خانه دوم (مالی): موفقیت حرفه‌ای و جایگاه اجتماعی شما مستقیماً با درآمد و ارزش‌های شخصی شما گره خورده است. شما با استفاده از منابع خود به موفقیت می‌رسید.*',
        7: '*حاکم خانه شغل (۱۰) در خانه هفتم (روابط): مسیر شغلی یا شهرت عمومی شما به شدت به شریک زندگی، همکاری‌ها یا مشتریان شما وابسته است. شما در کارهای مشارکتی موفق هستی.*',
        # ... برای سایر خانه‌ها باید تفسیر مناسب افزوده شود.
    }
    # ... سایر حاکمیت‌های خانه‌ها (مثلاً حاکم خانه ۷ در خانه X، حاکم خانه ۴ در خانه X)
}


# ----------------------------------------------------------------------
# E. نقشه سیارات و معادل فارسی آن‌ها (برای استفاده در خروجی)
# ----------------------------------------------------------------------

PLANETS_MAP: Dict[str, str] = {
    "SUN": "خورشید",
    "MOON": "ماه",
    "MERCURY": "عطارد",
    "VENUS": "زهره",
    "MARS": "مریخ",
    "JUPITER": "مشتری",
    "SATURN": "زحل",
    "URANUS": "اورانوس",
    "NEPTUNE": "نپتون",
    "PLUTO": "پلوتو",
    "TRUE_NODE": "گره شمالی",
    "PART_OF_FORTUNE": "سهم سعادت"
}

# ----------------------------------------------------------------------
# F. نقشه برج‌ها و معادل فارسی آن‌ها
# ----------------------------------------------------------------------

SIGN_MAP: Dict[str, str] = {
    'aries': 'حمل', 'taurus': 'ثور', 'gemini': 'جوزا', 'cancer': 'سرطان',
    'leo': 'اسد', 'virgo': 'سنبله', 'libra': 'میزان', 'scorpio': 'عقرب',
    'sagittarius': 'قوس', 'capricorn': 'جدی', 'aquarius': 'دلو', 'pisces': 'حوت'
}

# ----------------------------------------------------------------------
# G. نقشه زوایا و معادل فارسی آن‌ها
# ----------------------------------------------------------------------

ASPECT_MAP: Dict[str, str] = {
    "Conjunction": "اتصال (همراهی)",
    "Sextile": "تثلیث کوچک",
    "Square": "تربیع (چالش)",
    "Trine": "تثلیث",
    "Opposition": "مقابله",
}
