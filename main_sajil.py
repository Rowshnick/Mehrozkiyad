import sajil_part_one
import sajil_part_two
import keyboards 
import utils 
from typing import Dict, Any 

# ==============================================================================
# ุชุงุจุน ุงุตู ฺฉู ุงุฒ bot_app.py ูุฑุงุฎูุงู ูโุดูุฏ
# ==============================================================================
# ======================================================================
# ุงู ฺฉ ูุงู Placeholder ุงุณุช. ูุทูุง ุขู ุฑุง ุจุง ููุทู ุณุฌู ูุงูุน ุฌุงฺฏุฒู ฺฉูุฏ.
# ======================================================================

async def run_sajil_workflow(chat_id: int, incoming_text: str):
    """
    ุฌุฑุงู ฺฉุงุฑ ุณุฌู: ุฏุฑุงูุช ุงุนุฏุงุฏ/ฺฉููุงุช ฺฉูุฏ ู ุชููุฏ ููุงุฏ ูพุดููุงุฏ.
    """
    
    # ๐ฅ [ุงุตูุงุญ ุญุงุช]: ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน escape_code_block ุจุฑุง ูุฑูุฏ ุฏุงุฎู ุจฺฉโุชฺฉ
    escaped_input = utils.escape_code_block(incoming_text) 
    
    # ูุฑุถ ูโฺฉูู ฺฉู ุฏุงุฏูโูุง ุฏุฑุงูุช ุดุฏูโุงูุฏ.
    
    output = (
        "โ **ุงุทูุงุนุงุช ุณุฌู ุฏุฑุงูุช ุดุฏ!**\\n\\n"
        # ๐ก ุญุงูุง ฺฉู ูุฑูุฏ ููุท ุจุฑุง ฺฉุฏ ุจูุงฺฉ Escape ุดุฏูุ ุขู ุฑุง ูุณุชููุงู ุฏุงุฎู ุจฺฉโุชฺฉ ูุฑุงุฑ ูโุฏูู.
        f"ุดูุง ุฏุงุฏูโูุง ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉุฑุฏุฏ\\: `{escaped_input}`\\n"
        # Escape ฺฉุฑุฏู ููุทูโูุง (\\.) ู ฺฉูููู (\\:) ุฏุฑ ูุชู ุซุงุจุช
        "ุชุญูู ููุงุฏุดูุงุณุงูู ู ุชููุฏ ุณุฌู (ููุงุฏ) ุจุฑ ุงุณุงุณ ุงุตูู ฺฏูุงุชุฑุง ู ุนุฏุฏุดูุงุณ ุงูุฌุงู ูโุดูุฏ\\.\\n\\n"
        "**ููุงุฏ ูพุดููุงุฏ\\:** (ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ ููุทู ุจุตุฑ ุง ุชููุฏ ฺฏุฑุงูฺฉ)\\n"
        "*ุงู ุจุฎุด ุจุฑุง ุชููุฏ ฺฏุฑุงูฺฉ ู ุชุญูู ุนููโุชุฑ ุจู ูุงฺููโูุง sajil_part_one ู sajil_part_two ุงุฑุณุงู ุดุฏ\\.*"
    )
    
    # parse_mode ุจุงุฏ ููฺูุงู "MarkdownV2" ุจุงุดุฏ.
    await utils.send_telegram_message(
        chat_id=chat_id, 
        text=output, 
        parse_mode="MarkdownV2", 
        reply_markup=keyboards.services_menu_keyboard() 
    )


# ูุงฺููโูุง sajil_part_one ู sajil_part_two...
