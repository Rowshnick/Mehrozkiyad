import sajil_part_one
import sajil_part_two
import keyboards # ุจุฑุง ุจุงุฒฺฏุฑุฏุงูุฏู ฺฉุจูุฑุฏ ุฏุฑ ุงูุชูุง
import utils # ุจุฑุง ุงุฑุณุงู ูพุงู ููุง
from typing import Dict, Any 

# ==============================================================================
# ุชุงุจุน ุงุตู ฺฉู ุงุฒ bot_app.py ูุฑุงุฎูุงู ูโุดูุฏ
# ==============================================================================
# ======================================================================
# ุงู ฺฉ ูุงู Placeholder ุงุณุช. ูุทูุง ุขู ุฑุง ุจุง ููุทู ุณุฌู ูุงูุน ุฌุงฺฏุฒู ฺฉูุฏ.
# ======================================================================

async def run_sajil_workflow(chat_id: int, incoming_text: str):
    """
    ุฌุฑุงู ฺฉุงุฑ ุณุฌู: ุฏุฑุงูุช ุงุนุฏุงุฏ/ฺฉููุงุช ฺฉูุฏ ู ุชููุฏ ููุงุฏ ูพุดููุงุฏ.
    """
    
    # ๐๏ธ [ุงุตูุงุญ ฑ]: Escape ฺฉุฑุฏู ูุฑูุฏ ฺฉุงุฑุจุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน ูุฑฺฉุฒ ุฏุฑ utils
    escaped_input = utils.escape_markdown_v2(incoming_text)
    
    # ูุฑุถ ูโฺฉูู ฺฉู ุฏุงุฏูโูุง ุฏุฑุงูุช ุดุฏูโุงูุฏ.
    # ุฏุฑ ุงูุฌุง ุจุงุฏ ููุทู ูพุฑุฏุงุฒุด ุงุนุฏุงุฏุ ุชุจุฏู ุจู ุญุฑููุ ู ุชููุฏ ุณุฌู ูุฑุงุฑ ฺฏุฑุฏ.
    
    output = (
        "โ **ุงุทูุงุนุงุช ุณุฌู ุฏุฑุงูุช ุดุฏ!**\\n\\n"
        # ๐๏ธ [ุงุตูุงุญ ฒ]: Escape ฺฉุฑุฏู ฺฉูููู (:) ู ุงุณุชูุงุฏู ุงุฒ ูุฑูุฏ Escape ุดุฏู
        f"ุดูุง ุฏุงุฏูโูุง ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉุฑุฏุฏ\\: `{escaped_input}`\\n"
        # ๐๏ธ [ุงุตูุงุญ ฒ]: Escape ฺฉุฑุฏู ููุทูโูุง (\\.) ู ฺฉูููู (\\:) ุฏุฑ ูุชู ุซุงุจุช
        "ุชุญูู ููุงุฏุดูุงุณุงูู ู ุชููุฏ ุณุฌู (ููุงุฏ) ุจุฑ ุงุณุงุณ ุงุตูู ฺฏูุงุชุฑุง ู ุนุฏุฏุดูุงุณ ุงูุฌุงู ูโุดูุฏ\\.\\n\\n"
        "**ููุงุฏ ูพุดููุงุฏ\\:** (ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ ููุทู ุจุตุฑ ุง ุชููุฏ ฺฏุฑุงูฺฉ)\\n"
        "*ุงู ุจุฎุด ุจุฑุง ุชููุฏ ฺฏุฑุงูฺฉ ู ุชุญูู ุนููโุชุฑ ุจู ูุงฺููโูุง sajil_part_one ู sajil_part_two ุงุฑุณุงู ุดุฏ\\.*"
    )
    
    # ๐ฅ [ุงุตูุงุญ ณ]: ุชุบุฑ parse_mode ุงุฒ "Markdown" ุจู "MarkdownV2" ุจุฑุง ุญู ุฎุทุง 400
    await utils.send_telegram_message(
        chat_id=chat_id, 
        text=output, 
        parse_mode="MarkdownV2", 
        reply_markup=keyboards.services_menu_keyboard() # ูุฑุถ ุจุฑ ุงู ุงุณุช ฺฉู ุงู ูุฑุงุฎูุงู ุฏุฑุณุช ุงุณุช
    )


# ูุงฺููโูุง sajil_part_one ู sajil_part_two ุฏุฑ ุงู ูุงู ุงุฌุฑุง ููโุดููุฏ
# ุขููุง ููุท ุจุฑุง ูุงุฑุฏ ุดุฏู ุชุนุฑู ุดุฏูโุงูุฏ ุชุง ููุทู ุฌุฑุงู ฺฉุงุฑ ุฑุง ุญูุธ ฺฉููุฏ.
